name: Test Gitleaks PR #111 Fix

# This tests the fix for: PR summary missing status when secrets found
# The bug: gitleaks exits non-zero which blocked the PR comment step from running
# The fix: PR comment/summary should now be posted even when secrets are detected

on:
  pull_request:
    branches:
      - main

permissions:
  actions: read
  contents: read
  pull-requests: write
  security-events: write

jobs:
  gitleaks-scan:
    name: "Gitleaks (PR Comment Test)"
    uses: huntridge-labs/hardening-workflows/.github/workflows/scanner-gitleaks.yml@fix/gitleaks-PR-comment
    with:
      post_pr_comment: true
      fail_on_severity: low
    secrets: inherit
